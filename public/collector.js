"use strict";(()=>{var ar=Object.defineProperty;var Oe=Object.getOwnPropertySymbols;var or=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable;var Ce=(e,r,t)=>r in e?ar(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,ie=(e,r)=>{for(var t in r||(r={}))or.call(r,t)&&Ce(e,t,r[t]);if(Oe)for(var t of Oe(r))sr.call(r,t)&&Ce(e,t,r[t]);return e};var A=(e,r,t)=>new Promise((n,a)=>{var i=u=>{try{f(t.next(u))}catch(m){a(m)}},o=u=>{try{f(t.throw(u))}catch(m){a(m)}},f=u=>u.done?n(u.value):Promise.resolve(u.value).then(i,o);f((t=t.apply(e,r)).next())});function ae(e){return A(this,null,function*(){return new Promise(r=>setTimeout(r,e))})}function oe(e){return JSON.stringify(e,Object.getOwnPropertyNames(e),2)}function J(e){return Math.max(-2147483648,Math.min(2147483647,e))}var fr=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_disjoint_timer_query","EXT_frag_depth","EXT_shader_texture_lod","EXT_sRGB","OES_element_index_uint","OES_fbo_render_mipmap","OES_standard_derivatives","OES_texture_float","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_depth_texture","WEBGL_draw_buffers"],Re=["EXT_color_buffer_half_float","EXT_float_blend","EXT_texture_compression_bptc","EXT_texture_compression_rgtc","EXT_texture_filter_anisotropic","KHR_parallel_shader_compile","OES_texture_float_linear","WEBGL_compressed_texture_astc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_lose_context","WEBGL_multi_draw","EXT_clip_control","EXT_depth_clamp","WEBGL_polygon_mode","EXT_texture_mirror_clamp_to_edge"],ur=["EXT_color_buffer_float","EXT_disjoint_timer_query_webgl2","EXT_texture_norm16","OES_draw_buffers_indexed","OVR_multiview2","EXT_polygon_offset_clamp","WEBGL_blend_equation_advanced_coherent","WEBGL_clip_cull_distance","WEBGL_draw_instanced_base_vertex_base_instance","WEBGL_multi_draw_instanced_base_vertex_base_instance","WEBGL_provoking_vertex","WEBGL_shader_pixel_local_storage","EXT_conservative_depth","NV_shader_noperspective_interpolation","OES_sample_variables","OES_shader_multisample_interpolation","EXT_render_snorm","WEBGL_render_shared_exponent","WEBGL_stencil_texturing","EXT_blend_func_extended"];var lr=[...Re,...fr].sort((e,r)=>e.localeCompare(r));function Ge(){return lr}var cr=[...Re,...ur].sort((e,r)=>e.localeCompare(r));function be(){return cr}function se(e){return[...new Set(e).values()]}var Ie=["MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_CUBE_MAP_TEXTURE_SIZE","MAX_FRAGMENT_UNIFORM_VECTORS","MAX_RENDERBUFFER_SIZE","MAX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_VARYING_VECTORS","MAX_VERTEX_ATTRIBS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_UNIFORM_VECTORS","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_VIEWPORT_WIDTH","MAX_VIEWPORT_HEIGHT","MAX_DUAL_SOURCE_DRAW_BUFFERS_EXT"],hr=["MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL"],pr=["MAX_3D_TEXTURE_SIZE","MAX_ARRAY_TEXTURE_LAYERS","MAX_CLIENT_WAIT_TIMEOUT_WEBGL","MAX_COLOR_ATTACHMENTS","MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS","MAX_COMBINED_UNIFORM_BLOCKS","MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS","MAX_DRAW_BUFFERS","MAX_ELEMENT_INDEX","MAX_ELEMENTS_INDICES","MAX_ELEMENTS_VERTICES","MAX_FRAGMENT_INPUT_COMPONENTS","MAX_FRAGMENT_UNIFORM_BLOCKS","MAX_FRAGMENT_UNIFORM_COMPONENTS","MAX_PROGRAM_TEXEL_OFFSET","MAX_SAMPLES","MAX_SERVER_WAIT_TIMEOUT","MAX_TEXTURE_LOD_BIAS","MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS","MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS","MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS","MAX_UNIFORM_BLOCK_SIZE","MAX_UNIFORM_BUFFER_BINDINGS","MAX_VARYING_COMPONENTS","MAX_VERTEX_OUTPUT_COMPONENTS","MAX_VERTEX_UNIFORM_BLOCKS","MAX_VERTEX_UNIFORM_COMPONENTS","MIN_PROGRAM_TEXEL_OFFSET","MIN_FRAGMENT_INTERPOLATION_OFFSET_OES","MAX_FRAGMENT_INTERPOLATION_OFFSET_OES","FRAGMENT_INTERPOLATION_OFFSET_BITS_OES","MAX_PIXEL_LOCAL_STORAGE_PLANES_WEBGL","MAX_COLOR_ATTACHMENTS_WITH_ACTIVE_PIXEL_LOCAL_STORAGE_WEBGL","MAX_COMBINED_DRAW_BUFFERS_AND_PIXEL_LOCAL_STORAGE_PLANES_WEBGL","MAX_VIEWS_OVR","MAX_CLIP_DISTANCES_WEBGL","MAX_CULL_DISTANCES_WEBGL","MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL"],fe={EXT_texture_filter_anisotropic:["MAX_TEXTURE_MAX_ANISOTROPY_EXT"],WEBGL_draw_buffers:["MAX_DRAW_BUFFERS_WEBGL","MAX_COLOR_ATTACHMENTS_WEBGL"],OVR_multiview2:["MAX_VIEWS_OVR"],WEBGL_clip_cull_distance:["MAX_CLIP_DISTANCES_WEBGL","MAX_CULL_DISTANCES_WEBGL","MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL"],WEBGL_shader_pixel_local_storage:["MAX_PIXEL_LOCAL_STORAGE_PLANES_WEBGL","MAX_COLOR_ATTACHMENTS_WITH_ACTIVE_PIXEL_LOCAL_STORAGE_WEBGL","MAX_COMBINED_DRAW_BUFFERS_AND_PIXEL_LOCAL_STORAGE_PLANES_WEBGL"],OES_shader_multisample_interpolation:["MIN_FRAGMENT_INTERPOLATION_OFFSET_OES","MAX_FRAGMENT_INTERPOLATION_OFFSET_OES","FRAGMENT_INTERPOLATION_OFFSET_BITS_OES"],EXT_blend_func_extended:["MAX_DUAL_SOURCE_DRAW_BUFFERS_EXT"]};function We(){return se([...Ie,...hr]).sort((e,r)=>e.localeCompare(r))}function Ne(){return se([...pr,...Ie]).sort((e,r)=>e.localeCompare(r))}var Pe=["VERTEX_SHADER","FRAGMENT_SHADER"],Xe=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT"],Be=["LOW_INT","MEDIUM_INT","HIGH_INT"];var Ue=["bgra8unorm-storage","chromium-experimental-dp4a","chromium-experimental-read-write-storage-texture","depth-clamping","depth-clip-control","depth24unorm-stencil8","depth32float-stencil8","float32-filterable","indirect-first-instance","multi-planar-formats","pipeline-statistics-query","rg11b10ufloat-renderable","shader-f16","texture-compression-bc","texture-compression-etc2","texture-compression-astc","timestamp-query","timestamp-query-inside-passes"].sort((e,r)=>e.localeCompare(r));var De=["maxTextureDimension1D","maxTextureDimension2D","maxTextureDimension3D","maxTextureArrayLayers","maxBindGroups","maxBindGroupsPlusVertexBuffers","maxBindingsPerBindGroup","maxDynamicUniformBuffersPerPipelineLayout","maxDynamicStorageBuffersPerPipelineLayout","maxSampledTexturesPerShaderStage","maxSamplersPerShaderStage","maxStorageBuffersPerShaderStage","maxStorageTexturesPerShaderStage","maxUniformBuffersPerShaderStage","maxFragmentCombinedOutputResources","maxUniformBufferBindingSize","maxStorageBufferBindingSize","minUniformBufferOffsetAlignment","minStorageBufferOffsetAlignment","maxVertexBuffers","maxBufferSize","maxVertexAttributes","maxVertexBufferArrayStride","maxInterStageShaderComponents","maxInterStageShaderVariables","maxColorAttachments","maxColorAttachmentBytesPerSample","maxComputeWorkgroupStorageSize","maxComputeInvocationsPerWorkgroup","maxComputeWorkgroupSizeX","maxComputeWorkgroupSizeY","maxComputeWorkgroupSizeZ","maxComputeWorkgroupsPerDimension"].sort((e,r)=>e.localeCompare(r));var Fe;(function(e){e[e.WebGL=0]="WebGL",e[e.WebGL2=1]="WebGL2",e[e.WebGPU=2]="WebGPU",e[e.WebXR=3]="WebXR"})(Fe||(Fe={}));var W=Uint8Array,M=Uint16Array,ve=Int32Array,ge=new W([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_e=new W([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ze=new W([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ze=function(e,r){for(var t=new M(31),n=0;n<31;++n)t[n]=r+=1<<e[n-1];for(var a=new ve(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)a[i]=i-t[n]<<5|n;return{b:t,r:a}},qe=Ze(ge,2),vr=qe.b,le=qe.r;vr[28]=258,le[258]=28;var je=Ze(_e,0),at=je.b,Ve=je.r,ce=new M(32768);for(v=0;v<32768;++v)D=(v&43690)>>1|(v&21845)<<1,D=(D&52428)>>2|(D&13107)<<2,D=(D&61680)>>4|(D&3855)<<4,ce[v]=((D&65280)>>8|(D&255)<<8)>>1;var D,v,$=function(e,r,t){for(var n=e.length,a=0,i=new M(r);a<n;++a)e[a]&&++i[e[a]-1];var o=new M(r);for(a=1;a<r;++a)o[a]=o[a-1]+i[a-1]<<1;var f;if(t){f=new M(1<<r);var u=15-r;for(a=0;a<n;++a)if(e[a])for(var m=a<<4|e[a],s=r-e[a],l=o[e[a]-1]++<<s,p=l|(1<<s)-1;l<=p;++l)f[ce[l]>>u]=m}else for(f=new M(n),a=0;a<n;++a)e[a]&&(f[a]=ce[o[e[a]-1]++]>>15-e[a]);return f},V=new W(288);for(v=0;v<144;++v)V[v]=8;var v;for(v=144;v<256;++v)V[v]=9;var v;for(v=256;v<280;++v)V[v]=7;var v;for(v=280;v<288;++v)V[v]=8;var v,Q=new W(32);for(v=0;v<32;++v)Q[v]=5;var v,gr=$(V,9,0);var _r=$(Q,5,0);var Ke=function(e){return(e+7)/8|0},mr=function(e,r,t){return(r==null||r<0)&&(r=0),(t==null||t>e.length)&&(t=e.length),new W(e.subarray(r,t))};var F=function(e,r,t){t<<=r&7;var n=r/8|0;e[n]|=t,e[n+1]|=t>>8},K=function(e,r,t){t<<=r&7;var n=r/8|0;e[n]|=t,e[n+1]|=t>>8,e[n+2]|=t>>16},ue=function(e,r){for(var t=[],n=0;n<e.length;++n)e[n]&&t.push({s:n,f:e[n]});var a=t.length,i=t.slice();if(!a)return{t:$e,l:0};if(a==1){var o=new W(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(C,R){return C.f-R.f}),t.push({s:-1,f:25001});var f=t[0],u=t[1],m=0,s=1,l=2;for(t[0]={s:-1,f:f.f+u.f,l:f,r:u};s!=a-1;)f=t[t[m].f<t[l].f?m++:l++],u=t[m!=s&&t[m].f<t[l].f?m++:l++],t[s++]={s:-1,f:f.f+u.f,l:f,r:u};for(var p=i[0].s,n=1;n<a;++n)i[n].s>p&&(p=i[n].s);var h=new M(p+1),_=he(t[s-1],h,0);if(_>r){var n=0,E=0,L=_-r,N=1<<L;for(i.sort(function(R,w){return h[w.s]-h[R.s]||R.f-w.f});n<a;++n){var y=i[n].s;if(h[y]>r)E+=N-(1<<_-h[y]),h[y]=r;else break}for(E>>=L;E>0;){var P=i[n].s;h[P]<r?E-=1<<r-h[P]++-1:++n}for(;n>=0&&E;--n){var O=i[n].s;h[O]==r&&(--h[O],++E)}_=r}return{t:new W(h),l:_}},he=function(e,r,t){return e.s==-1?Math.max(he(e.l,r,t+1),he(e.r,r,t+1)):r[e.s]=t},He=function(e){for(var r=e.length;r&&!e[--r];);for(var t=new M(++r),n=0,a=e[0],i=1,o=function(u){t[n++]=u},f=1;f<=r;++f)if(e[f]==a&&f!=r)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[f]}return{c:t.subarray(0,n),n:r}},Y=function(e,r){for(var t=0,n=0;n<r.length;++n)t+=e[n]*r[n];return t},Ye=function(e,r,t){var n=t.length,a=Ke(r+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=t[i];return(a+4+n)*8},ke=function(e,r,t,n,a,i,o,f,u,m,s){F(r,s++,t),++a[256];for(var l=ue(a,15),p=l.t,h=l.l,_=ue(i,15),E=_.t,L=_.l,N=He(p),y=N.c,P=N.n,O=He(E),C=O.c,R=O.n,w=new M(19),g=0;g<y.length;++g)++w[y[g]&31];for(var g=0;g<C.length;++g)++w[C[g]&31];for(var c=ue(w,7),S=c.t,H=c.l,T=19;T>4&&!S[ze[T-1]];--T);var k=m+5<<3,G=Y(a,V)+Y(i,Q)+o,b=Y(a,p)+Y(i,E)+o+14+3*T+Y(w,S)+2*w[16]+3*w[17]+7*w[18];if(u>=0&&k<=G&&k<=b)return Ye(r,s,e.subarray(u,u+m));var X,x,I,z;if(F(r,s,1+(b<G)),s+=2,b<G){X=$(p,h,0),x=p,I=$(E,L,0),z=E;var ee=$(S,H,0);F(r,s,P-257),F(r,s+5,R-1),F(r,s+10,T-4),s+=14;for(var g=0;g<T;++g)F(r,s+3*g,S[ze[g]]);s+=3*T;for(var B=[y,C],j=0;j<2;++j)for(var Z=B[j],g=0;g<Z.length;++g){var U=Z[g]&31;F(r,s,ee[U]),s+=S[U],U>15&&(F(r,s,Z[g]>>5&127),s+=Z[g]>>12)}}else X=gr,x=V,I=_r,z=Q;for(var g=0;g<f;++g){var d=n[g];if(d>255){var U=d>>18&31;K(r,s,X[U+257]),s+=x[U+257],U>7&&(F(r,s,d>>23&31),s+=ge[U]);var q=d&31;K(r,s,I[q]),s+=z[q],q>3&&(K(r,s,d>>5&8191),s+=_e[q])}else K(r,s,X[d]),s+=x[d]}return K(r,s,X[256]),s+x[256]},Er=new ve([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$e=new W(0),xr=function(e,r,t,n,a,i){var o=i.z||e.length,f=new W(n+o+5*(1+Math.ceil(o/7e3))+a),u=f.subarray(n,f.length-a),m=i.l,s=(i.r||0)&7;if(r){s&&(u[0]=i.r>>3);for(var l=Er[r-1],p=l>>13,h=l&8191,_=(1<<t)-1,E=i.p||new M(32768),L=i.h||new M(_+1),N=Math.ceil(t/3),y=2*N,P=function(ne){return(e[ne]^e[ne+1]<<N^e[ne+2]<<y)&_},O=new ve(25e3),C=new M(288),R=new M(32),w=0,g=0,c=i.i||0,S=0,H=i.w||0,T=0;c+2<o;++c){var k=P(c),G=c&32767,b=L[k];if(E[G]=b,L[k]=G,H<=c){var X=o-c;if((w>7e3||S>24576)&&(X>423||!m)){s=ke(e,u,0,O,C,R,g,S,T,c-T,s),S=w=g=0,T=c;for(var x=0;x<286;++x)C[x]=0;for(var x=0;x<30;++x)R[x]=0}var I=2,z=0,ee=h,B=G-b&32767;if(X>2&&k==P(c-B))for(var j=Math.min(p,X)-1,Z=Math.min(32767,c),U=Math.min(258,X);B<=Z&&--ee&&G!=b;){if(e[c+I]==e[c+I-B]){for(var d=0;d<U&&e[c+d]==e[c+d-B];++d);if(d>I){if(I=d,z=B,d>j)break;for(var q=Math.min(B,d-2),Te=0,x=0;x<q;++x){var re=c-B+x&32767,ir=E[re],Ae=re-ir&32767;Ae>Te&&(Te=Ae,b=re)}}}G=b,b=E[G],B+=G-b&32767}if(z){O[S++]=268435456|le[I]<<18|Ve[z];var Me=le[I]&31,Le=Ve[z]&31;g+=ge[Me]+_e[Le],++C[257+Me],++R[Le],H=c+I,++w}else O[S++]=e[c],++C[e[c]]}}for(c=Math.max(c,H);c<o;++c)O[S++]=e[c],++C[e[c]];s=ke(e,u,m,O,C,R,g,S,T,c-T,s),m||(i.r=s&7|u[s/8|0]<<3,s-=7,i.h=L,i.p=E,i.i=c,i.w=H)}else{for(var c=i.w||0;c<o+m;c+=65535){var te=c+65535;te>=o&&(u[s/8|0]=m,te=o),s=Ye(u,s+1,e.subarray(c,te))}i.i=o}return mr(f,0,n+Ke(s)+a)},dr=function(){for(var e=new Int32Array(256),r=0;r<256;++r){for(var t=r,n=9;--n;)t=(t&1&&-306674912)^t>>>1;e[r]=t}return e}(),wr=function(){var e=-1;return{p:function(r){for(var t=e,n=0;n<r.length;++n)t=dr[t&255^r[n]]^t>>>8;e=t},d:function(){return~e}}};var yr=function(e,r,t,n,a){if(!a&&(a={l:1},r.dictionary)){var i=r.dictionary.subarray(-32768),o=new W(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return xr(e,r.level==null?6:r.level,r.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+r.mem,t,n,a)};var pe=function(e,r,t){for(;t;++r)e[r]=t,t>>>=8},Sr=function(e,r){var t=r.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=r.level<2?4:r.level==9?2:0,e[9]=3,r.mtime!=0&&pe(e,4,Math.floor(new Date(r.mtime||Date.now())/1e3)),t){e[3]=8;for(var n=0;n<=t.length;++n)e[n+10]=t.charCodeAt(n)}};var Tr=function(e){return 10+(e.filename?e.filename.length+1:0)};function Je(e,r){r||(r={});var t=wr(),n=e.length;t.p(e);var a=yr(e,r,Tr(r),8),i=a.length;return Sr(a,r),pe(a,i-8,t.d()),pe(a,i-4,n),a}var Ar=typeof TextDecoder!="undefined"&&new TextDecoder,Mr=0;try{Ar.decode($e,{stream:!0}),Mr=1}catch(e){}function me(e,r){let t=e.getContext(r,{failIfMajorPerformanceCaveat:!0});if(t!==null)return{gl:t,majorPerformanceCaveat:!1};let n=e.getContext(r);return{gl:n,majorPerformanceCaveat:n!==null?!0:null}}function Ee(e){return"OffscreenCanvas"in window?new OffscreenCanvas(1,1).getContext(e)!==null:!1}function xe(e){let r=e;if("unpackColorSpace"in r&&"drawingBufferColorSpace"in r){let a=function(i,o){r[i]=o,n[i][o]=r[i]===o};var t=a;let n={unpackColorSpace:{srgb:!1,"display-p3":!1},drawingBufferColorSpace:{srgb:!1,"display-p3":!1}};return a("unpackColorSpace","srgb"),a("unpackColorSpace","display-p3"),a("drawingBufferColorSpace","srgb"),a("drawingBufferColorSpace","display-p3"),n}return null}function de(e){let r=e.getExtension("WEBGL_debug_renderer_info");return r===null?null:{vendor:e.getParameter(r.UNMASKED_VENDOR_WEBGL),renderer:e.getParameter(r.UNMASKED_RENDERER_WEBGL)}}function we(e,r){let t={};for(let n of r)t[n]=e.getExtension(n)!==null;return t}function ye(e,r){let t=e,n={};for(let i of r){if(!(i in e))continue;let o=t[i];if(o===void 0)continue;let f=e.getParameter(o);if(typeof f=="number")n[i]=f;else throw new Error(`Unhandled WebGL parameter: ${i} of type ${typeof f}`)}let a=e.getParameter(e.MAX_VIEWPORT_DIMS);n.MAX_VIEWPORT_WIDTH=a[0],n.MAX_VIEWPORT_HEIGHT=a[1];for(let i in fe){let o=e.getExtension(i);if(o!==null){let f=fe[i];if(f===void 0)continue;for(let u of f)n[u]=J(e.getParameter(o[u]))}}return n}function Se(e){let r=e,t={};for(let n of Pe){let a={};for(let i of Xe){let o=r[i];if(o===void 0)continue;let f=r[n];if(f===void 0)continue;let u=e.getShaderPrecisionFormat(f,o);u!==null&&(a[i]={precision:u.precision,rangeMin:u.rangeMin,rangeMax:u.rangeMax})}for(let i of Be){let o=r[i];if(o===void 0)continue;let f=r[n];if(f===void 0)continue;let u=e.getShaderPrecisionFormat(f,o);u!==null&&(a[i]={rangeMin:u.rangeMax,rangeMax:u.rangeMin})}t[n]=a}return t}function Qe(){return typeof navigator!="undefined"&&"gpu"in navigator?navigator.gpu:null}function er(e){return A(this,null,function*(){return"requestAdapter"in e?yield e.requestAdapter():null})}function rr(e,r){let t=r.reduce((a,i)=>{var o;return a[i]=((o=e.features)==null?void 0:o.has(i))||!1,a},{}),n=e.features?[...e.features].filter(a=>r.indexOf(a)<0):[];return n.length>0&&(t.other=n.join(",")),t}function tr(e,r){var i;let t=e.limits,n=r.reduce((o,f)=>{if(f in t){let u=t[f];u!==void 0&&(o[f]=J(u))}return o},{}),a=Object.keys(((i=e.limits)==null?void 0:i.constructor.prototype)||{}).filter(o=>r.indexOf(o)<0);return a.length>0&&(n.other=a.join(",")),n}function nr(e){return A(this,null,function*(){if(!("requestAdapterInfo"in e))return{};let r=yield e.requestAdapterInfo();return{vendor:r.vendor,device:r.device,architecture:r.architecture,description:r.description}})}(function(){let r={host:"https://api.web3dsurvey.com",samplePercentage:100,delay:2e3};function t(){return typeof web3DSurveyConfig=="object"?ie(ie({},r),web3DSurveyConfig):r}function n(l){return{collectionError:oe(l)}}function a(l,p){try{return l()}catch(h){return p}}function i(l){return A(this,null,function*(){try{return yield l()}catch(p){return n(p)}})}function o(){return A(this,null,function*(){let l,p=document.createElement("canvas"),{gl:h,majorPerformanceCaveat:_}=me(p,"webgl");return h!==null?l={supported:!0,majorPerformanceCaveat:_,OffscreenCanvas:"OffscreenCanvas"in window&&Ee("webgl"),extensions:we(h,Ge()),parameters:ye(h,We()),rendererInfo:de(h),shaderPrecision:Se(h),colorSpace:xe(h)}:l={supported:!1},p.remove(),l})}function f(){return A(this,null,function*(){let l,p=document.createElement("canvas"),{gl:h,majorPerformanceCaveat:_}=me(p,"webgl2");return h!==null?l={supported:!0,majorPerformanceCaveat:_,OffscreenCanvas:"OffscreenCanvas"in window&&Ee("webgl2"),extensions:we(h,be()),parameters:ye(h,Ne()),rendererInfo:de(h),shaderPrecision:Se(h),colorSpace:xe(h)}:l={supported:!1},p.remove(),l})}function u(){return A(this,null,function*(){let l=Qe();if(l===null)return{supported:!1};let p=yield er(l);return p===null?{supported:!0,adapter:!1}:{supported:!0,adapter:!0,isFallbackAdapter:p.isFallbackAdapter,features:rr(p,Ue),limits:tr(p,De),adapterInfo:yield nr(p)}})}function m(){return A(this,null,function*(){return{supported:"xr"in navigator}})}function s(){return A(this,null,function*(){let l=a(()=>window.location.origin,"error");return{locationOrigin:l,parentLocationOrigin:a(()=>window.parent!==null?window.parent.location.origin:null,"error"),documentReferer:a(()=>l.indexOf("web3dsurvey.com")>-1?document.referrer:null,"error"),hardwareConcurrency:navigator.hardwareConcurrency,deviceMemory:"deviceMemory"in navigator?navigator.deviceMemory:null,screenWidth:window.screen.width,screenHeight:window.screen.height,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth,devicePixelRatio:window.devicePixelRatio,webdriver:"webdriver"in navigator?navigator.webdriver:null,ImageBitmap:"ImageBitmap"in window,OffscreenCanvas:"OffscreenCanvas"in window,WebAssembly:"WebAssembly"in window,Worker:"Worker"in window}})}document.addEventListener("DOMContentLoaded",()=>A(this,null,function*(){try{if("localStorage"in window){let _=window.localStorage,E=_.getItem("web3dsurvey-collected");if(E){let L=new Date(E);if((new Date().getTime()-L.getTime())/(1e3*60*60)<24)return}_.setItem("web3dsurvey-collected",new Date().toISOString())}}catch(_){}let l=t();if(Math.random()>l.samplePercentage/100)return;yield ae(l.delay);let p={webgl:yield i(o),webgl2:yield i(f),webgpu:yield i(u),webxr:yield i(m),device:yield i(s),version:23,timestamp:new Date().toISOString()},h=`${l.host}/api/stats`;try{let _=JSON.stringify(p),E=new TextEncoder().encode(_),L=Je(E,{level:9}),N=btoa(String.fromCharCode(...L)),y=new URLSearchParams;y.append("stats",N);let P=h+"?"+y.toString();if(!(yield fetch(P,{method:"GET"})).ok)throw new Error("Failed to send graphics statistics via GET")}catch(_){p.error=oe(_),(yield fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok||console.error("Failed to send graphics statistics via POST")}}))})();})();
